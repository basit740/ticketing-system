<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Online Helpdesk</title>
    <link rel="stylesheet" href="../output.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Fredoka&family=Poppins:wght@300;400;500;600;700&family=Source+Code+Pro:wght@200;300;400;500&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.3.0/chart.umd.min.js"></script>
</head>
<body class="bg-gray-100">

    <div class="flex flex-row">
        <!--side nav container-->
        <div class="bg-gray-200 w-16 h-screen flex flex-col justify-between items-center p-3 flex-none fixed top-0 left-0">
            <div class="flex flex-col items-center ">

                <!--logo-->
                <div class=" p-2 mb-2">
                    <a href="#">
                     <img src="/img/logo.png" alt="">
                    </a>
                </div>

                 <!--dash-->
                 <div class="h-16 w-16 bg-gray-200">
                    <div class="h-16 w-16 bg-gray-200 p-0 flex  items-center justify-center rounded-br-lg">
                        <a href="dashboard.html">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-6 h-6">
                           <path fill-rule="evenodd" d="M3 6a3 3 0 013-3h2.25a3 3 0 013 3v2.25a3 3 0 01-3 3H6a3 3 0 01-3-3V6zm9.75 0a3 3 0 013-3H18a3 3 0 013 3v2.25a3 3 0 01-3 3h-2.25a3 3 0 01-3-3V6zM3 15.75a3 3 0 013-3h2.25a3 3 0 013 3V18a3 3 0 01-3 3H6a3 3 0 01-3-3v-2.25zm9.75 0a3 3 0 013-3H18a3 3 0 013 3V18a3 3 0 01-3 3h-2.25a3 3 0 01-3-3v-2.25z" clip-rule="evenodd" />
                        </svg>
                        </a>
                    </div>
                </div>

                <!--tickets-->
                <div class="h-16 w-16 bg-gray-100">
                    <div class="h-16 w-16 flex bg-gray-200 items-center justify-center rounded-br-lg">
                    <a href="tickets.html">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-6 h-6">
                            <path fill-rule="evenodd" d="M1.5 6.375c0-1.036.84-1.875 1.875-1.875h17.25c1.035 0 1.875.84 1.875 1.875v3.026a.75.75 0 01-.375.65 2.249 2.249 0 000 3.898.75.75 0 01.375.65v3.026c0 1.035-.84 1.875-1.875 1.875H3.375A1.875 1.875 0 011.5 17.625v-3.026a.75.75 0 01.374-.65 2.249 2.249 0 000-3.898.75.75 0 01-.374-.65V6.375zm15-1.125a.75.75 0 01.75.75v.75a.75.75 0 01-1.5 0V6a.75.75 0 01.75-.75zm.75 4.5a.75.75 0 00-1.5 0v.75a.75.75 0 001.5 0v-.75zm-.75 3a.75.75 0 01.75.75v.75a.75.75 0 01-1.5 0v-.75a.75.75 0 01.75-.75zm.75 4.5a.75.75 0 00-1.5 0V18a.75.75 0 001.5 0v-.75zM6 12a.75.75 0 01.75-.75H12a.75.75 0 010 1.5H6.75A.75.75 0 016 12zm.75 2.25a.75.75 0 000 1.5h3a.75.75 0 000-1.5h-3z" clip-rule="evenodd" />
                          </svg>
                      </a>
                    </div >
                </div>

                <!--KB-->
                <div class="w-16 h-16 bg-gray-200">
                    <div class="h-16 w-16 flex items-center justify-center bg-gray-100 rounded-l-lg">
                        <a href="canned-response.html">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-6 h-6 fill-blue-950 opacity-90">
                                <path d="M11.25 4.533A9.707 9.707 0 006 3a9.735 9.735 0 00-3.25.555.75.75 0 00-.5.707v14.25a.75.75 0 001 .707A8.237 8.237 0 016 18.75c1.995 0 3.823.707 5.25 1.886V4.533zM12.75 20.636A8.214 8.214 0 0118 18.75c.966 0 1.89.166 2.75.47a.75.75 0 001-.708V4.262a.75.75 0 00-.5-.707A9.735 9.735 0 0018 3a9.707 9.707 0 00-5.25 1.533v16.103z" />
                              </svg>
                        </a>
                    </div>
                </div>

                <!--Repots-->
                <div class="h-16 w-16 bg-gray-100">
                    <div class="h-16 w-16 flex items-center justify-center bg-gray-200 rounded-tr-lg">
                        <a href="analytics.html">
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-6 h-6">
                                    <path d="M18.375 2.25c-1.035 0-1.875.84-1.875 1.875v15.75c0 1.035.84 1.875 1.875 1.875h.75c1.035 0 1.875-.84 1.875-1.875V4.125c0-1.036-.84-1.875-1.875-1.875h-.75zM9.75 8.625c0-1.036.84-1.875 1.875-1.875h.75c1.036 0 1.875.84 1.875 1.875v11.25c0 1.035-.84 1.875-1.875 1.875h-.75a1.875 1.875 0 01-1.875-1.875V8.625zM3 13.125c0-1.036.84-1.875 1.875-1.875h.75c1.036 0 1.875.84 1.875 1.875v6.75c0 1.035-.84 1.875-1.875 1.875h-.75A1.875 1.875 0 013 19.875v-6.75z" />
                            </svg>
                        </a>
                    </div>
                </div>

                <!--messages-->
                    
               
                <!--B-items-->
                </div>
                    <div class="pb-6 flex flex-col space-y-2">
                    
                        <div class="h-10 w-10 hover:bg-gray-50 flex justify-center items-center rounded-lg hover:duration-700">
                            <a href="users.html">
                                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1"
                                    stroke="currentColor" class="w-6 h-6 opacity-50">
                                    <path stroke-linecap="round" stroke-linejoin="round"
                                        d="M15 19.128a9.38 9.38 0 002.625.372 9.337 9.337 0 004.121-.952 4.125 4.125 0 00-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 018.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0111.964-3.07M12 6.375a3.375 3.375 0 11-6.75 0 3.375 3.375 0 016.75 0zm8.25 2.25a2.625 2.625 0 11-5.25 0 2.625 2.625 0 015.25 0z" />
                                </svg>
                    
                            </a>
                        </div>
                    
                         <!--side nav logout-->
                      <div
                        class="h-10 w-10 hover:bg-gray-50 flex justify-center items-center rounded-lg hover:duration-700"
                      >
                        <a href=""
                        onclick="logout(event)">
                          <svg
                            xmlns="http://www.w3.org/2000/svg"
                            fill="none"
                            viewBox="0 0 24 24"
                            stroke-width="1"
                            stroke="currentColor"
                            class="w-6 h-6 opacity-50"
                          >
                            <path
                              stroke-linecap="round"
                              stroke-linejoin="round"
                              d="M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15M12 9l-3 3m0 0l3 3m-3-3h12.75"
                            />
                          </svg>
                        </a>
                      </div>
                    </div>
                </div>

            <div class="bg-gray-100 flex-auto ml-16">
        <!---top nav-->
        <div
          class="bg-white bottom-1 h-16 border-b-3 drop-shadow-md flex items-center justify-between"
        >
          <div
            class="pl-7 font-poppins font-semibold text-lg text-blue-950 opacity-90"
          >
            Canned Response
          </div>
          <!--Profile-->
          <section class="pr-10">
            <div class="flex items-center">
              <button
                id="dropdownToggle"
                class="rounded-full w-10 h-10 bg-gray-200 relative"
              >
                <img
                  src="https://i.pinimg.com/564x/d3/71/12/d371121e7e55c3e6bc27b6cea14ebe0d.jpg"
                  alt="Avatar"
                  class="rounded-full w-100% h-100%"
                />
              </button>
            </div>
          </section>
          <!--end Profile-->
        </div>

            <!--main content-->
            <main class="p-9 space-y-8">
          <div
            class="h-12 flex justify-between space-x-4 font-poppins text-gray-500"
          >
            <div
              class="h-10 mt-4 relative flex items-center text-gray-400 focus-within:text-gray-600 border-none"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 24 24"
                stroke-width="1.5"
                stroke="currentColor"
                class="w-5 h-5 absolute m-0 pointer-events-none left-1"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"
                />
              </svg>
              <input
                type="text"
                id="searchInput"
                placeholder="Search"
                class="h-full rounded-lg focus:ring-gray-400 pl-8 border-none sm:w-36 md:w-56 w-44"
              />
            </div>
            <!-- Modal toggle -->
            <div
              id="userModal"
              class="bg-blue-950 h-10 sm:w-40 w-40 xl:w-48 md:w-48 rounded-lg text-xs flex-none text-white font-medium pl-1.5 p-1 flex items-center opacity-90 mt-4"
            >
              <button
                data-modal-target="staticModal"
                data-modal-toggle="staticModal"
                class="text-white font-poppins font-medium flex space-x-2 p-3 text-sm items-center justify-center"
                type="button"
                id="btn-toggle-modal"
              >
                <p class="flex-none xl:text-sm md:text-sm sm:text-xs text-xs">Create Template</p>
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5 flex-none">
                <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v6m3-3H9m12 0a9 9 0 11-18 0 9 9 0 0118 0z" />
                </svg>
              </button>
            </div>
            <!-- Main modal -->
          </div>

          <div class=" h-[35rem] rounded-lg flex flex-col">
            <div class="h-full overflow-auto rounded-lg">
              <ul id="noteList" class="list-none justify-between space-y-5 "></ul>
            </div>
          </div>
        </main>
      </section>
      
      <div
        id="staticModal"
        class="fixed top-0 left-0 right-0 z-50 hidden items-center justify-center w-full h-full bg-black bg-opacity-50 overflow-y-auto"
      >
        <div class="justify-center items-center flex pt-2">
          <div class="relative w-full max-w-2xl max-h-full">
            <!-- Modal content -->
            <div class="relative bg-white rounded-lg shadow dark:bg-gray-700">
              <!-- Modal header -->
              <div
                class="flex items-start justify-between p-3 border-b rounded-t dark:border-gray-600"
              >
                <h3 class="text-xl font-semibold text-gray-900 dark:text-white">
                  New Template
                </h3>
                <button
                  data-modal-hide="staticModal"
                  type="button"
                  id="btn-close-modal"
                  class="text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ml-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white"
                >
                  <svg
                    class="w-3 h-3"
                    aria-hidden="true"
                    xmlns="http://www.w3.org/2000/svg"
                    fill="none"
                    viewBox="0 0 14 14"
                  >
                    <path
                      stroke="currentColor"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"
                    />
                  </svg>
                  <span class="sr-only">Close modal</span>
                </button>
              </div>
              <!-- Modal body -->
              <div class="p-6 space-y-6">
                <input
          id="noteTitle"
          class="w-full p-2 rounded border border-gray-300 focus:outline-none focus:ring focus:border-blue-500"
          placeholder="Response Title"
        />
        <textarea
          id="noteTextarea"
          class="w-full h-[500px] mt-2 p-2 rounded border border-gray-300 focus:outline-none focus:ring focus:border-blue-500"
          placeholder="Message"
        ></textarea>
              </div>
              <!-- Modal footer -->
              <div
                class="flex items-center p-6 space-x-2 border-t border-gray-200 rounded-b dark:border-gray-600"
              >
               <button
          id="saveNoteButton"
          class="text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800"
        >
          Create
        </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <div
      id="editModal"
      class="fixed inset-0 flex items-center justify-center z-50 hidden"
    >
      <div class="absolute inset-0 bg-black opacity-50"></div>
      <div class="bg-white p-6 rounded-lg z-10">
        <h2 class="text-xl font-semibold mb-2">Update Template</h2>
        <input
          id="editNoteTitle"
          class="w-full p-2 mb-2 rounded border border-gray-300 focus:outline-none focus:ring focus:border-blue-500"
          placeholder="Note Title"
        />
        <textarea
          id="editNoteTextarea"
          class="w-full h-32 p-2 mb-2 rounded border border-gray-300 focus:outline-none focus:ring focus:border-blue-500"
          placeholder="Edit your note"
        ></textarea>
        <button
          id="editNoteButton"
          class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded"
        >
          Save Changes
        </button>
        <button
          id="cancelEditButton"
          class="ml-2 text-gray-500 hover:text-gray-700"
        >
          Cancel
        </button>
      </div>
    </div>
    <!--profile modal-->
      <div dir="rtl">
        <div
          id="dropdownMenu"
          class="hidden z-50 absolute bg-gray-200 shadow-xl mt-1 w-28 rounded-lg top-14 start-10 mb-14"
        >
          <a
            href="profile.html"
            class="block px-4 py-2 text-gray-800 hover:bg-gray-100 rounded-lg text-left"
          >
            <p class="">Profile</p>
          </a>
          <a
            href=""
            onclick="logout(event)"
            class="block font-normal px-4 py-2 hover:bg-gray-100 rounded-lg text-left"
          >
            <p class="">Logout</p>
          </a>
        </div>
        <!--profile modal end-->
<script src="/dist/JS/globalFunctions.js"></script>
<script src="/dist/JS/avatar.js"></script>

<script src="/dist/JS/filter.js"></script>
    <script>
      const openModalButtons = document.querySelectorAll(
        '[data-modal-toggle="staticModal"]'
      );
      const closeModalButton = document.querySelector(
        '[data-modal-hide="staticModal"]'
      );
      const staticModal = document.getElementById("staticModal");

      openModalButtons.forEach((button) => {
        button.addEventListener("click", () => {
          staticModal.classList.add("block");
          staticModal.classList.remove("hidden");
        });
      });

      closeModalButton.addEventListener("click", () => {
        staticModal.classList.remove("block");
        staticModal.classList.add("hidden");
      });
    </script>

    <script>
        

      const noteTextarea = document.getElementById("noteTextarea");
      const noteTitle = document.getElementById("noteTitle");
      const saveNoteButton = document.getElementById("saveNoteButton");
      const responseTextarea = document.getElementById("responseTextarea");
      const saveResponseButton = document.getElementById("saveResponseButton");
      const noteList = document.getElementById("noteList");
      const editModal = document.getElementById("editModal");
      const editNoteTitle = document.getElementById("editNoteTitle");
      const editNoteTextarea = document.getElementById("editNoteTextarea");
      const editNoteButton = document.getElementById("editNoteButton");
      const cancelEditButton = document.getElementById("cancelEditButton");
      let editIndex = null;

function saveToLocalStorage(key, data) {
  localStorage.setItem(key, JSON.stringify(data));
}

// Function to retrieve data from localStorage
function getFromLocalStorage(key) {
  const data = localStorage.getItem(key);
  return data ? JSON.parse(data) : [];
}

// Function to display saved notes on the notes.html page
function displaySavedNotes() {
  const noteList = document.getElementById("noteList");
  noteList.innerHTML = "";
  
  const savedNotes = getFromLocalStorage("notes");
  savedNotes.forEach((note, index) => {
    // Create and append list items for each saved note
    const noteItem = document.createElement("li");
    noteItem.className = "note-item";
    noteItem.innerHTML = `
      <span class="font-semibold">${note.title}</span>
      <p class="text-gray-600">${note.note}</p>
    `;
    noteList.appendChild(noteItem);
  });
}

// Function to save a new note to localStorage
function saveNoteToLocalStorage(title, note) {
  const savedNotes = getFromLocalStorage("notes");
  savedNotes.push({ title, note });
  saveToLocalStorage("notes", savedNotes);
}

// Initialize saved notes display on the notes.html page
if (window.location.pathname.includes("notes.html")) {
  displaySavedNotes();
}

saveNoteButton.addEventListener("click", () => {
        const title = noteTitle.value;
        const note = noteTextarea.value;
        if (note.trim() !== "") {
          if (editIndex !== null) {
            editNoteInLocalStorage(editIndex, title, note);
            editIndex = null;
          } else {
            saveNoteToLocalStorage(title, note);
          }
          displaySavedNotes();
          noteTitle.value = "";
          noteTextarea.value = "";
          populateCannedResponses();
        }
      });

      function saveNoteToLocalStorage(title, note) {
        const notes = JSON.parse(localStorage.getItem("notes")) || [];
        notes.push({ title, note });
        localStorage.setItem("notes", JSON.stringify(notes));
      }

      function saveResponseToLocalStorage(response) {
        const responses = JSON.parse(localStorage.getItem("responses")) || [];
        responses.push(response);
        localStorage.setItem("responses", JSON.stringify(responses));
      }

      function displaySavedNotes() {
        noteList.innerHTML = "";
        const notes = JSON.parse(localStorage.getItem("notes")) || [];
        notes.forEach((note, index) => {
          const noteItem = document.createElement("li");
          noteItem.className = "note-item";
          noteItem.innerHTML = `
        <div class="bg-white rounded-lg shadow-lg p-1 "

        <div >
          <span class="font-semibold">${note.title}</span>
          <p class="text-gray-600">${note.note}</p>
        
         
     
          <button onclick="deleteNote(${index})" class="bg-red-950 opacity-90  text-white text-xs  rounded-lg h-8 font-semibold px-3 py-1">Delete</button>

          <button onclick="openEditModal(${index})" class="bg-yellow-500 opacity-90  text-white text-xs  rounded-lg h-8 font-semibold px-3 py-1">Edit</button>
          

          <!--<button onclick="useAsResponse('${note.note}')" class="bg-yellow-500 opacity-90  text-white text-xs  rounded-lg h-8 font-semibold px-3 py-1">Use as Response</button>
          </div>-->
        `;
          noteList.appendChild(noteItem);
        });
      }

      function editNoteInLocalStorage(index, title, note) {
        const notes = JSON.parse(localStorage.getItem("notes")) || [];
        notes[index].title = title;
        notes[index].note = note;
        localStorage.setItem("notes", JSON.stringify(notes));
      }

      function openEditModal(index) {
        const notes = JSON.parse(localStorage.getItem("notes")) || [];
        const selectedNote = notes[index];
        editNoteTitle.value = selectedNote.title;
        editNoteTextarea.value = selectedNote.note;
        editIndex = index;
        editModal.classList.remove("hidden");
      }

      function closeEditModal() {
        editIndex = null;
        editModal.classList.add("hidden");
      }

      editNoteButton.addEventListener("click", () => {
        const editedTitle = editNoteTitle.value;
        const editedNote = editNoteTextarea.value;
        if (editedNote.trim() !== "") {
          editNoteInLocalStorage(editIndex, editedTitle, editedNote);
          displaySavedNotes();
          closeEditModal();
        }
      });

      cancelEditButton.addEventListener("click", () => {
        closeEditModal();
      });

      function deleteNote(index) {
        const notes = JSON.parse(localStorage.getItem("notes")) || [];
        notes.splice(index, 1);
        localStorage.setItem("notes", JSON.stringify(notes));
        displaySavedNotes();
        populateCannedResponses();
      }

      function useAsResponse(note) {
        const currentResponse = responseTextarea.value;
        const newResponse = currentResponse
          ? `${currentResponse}\n\n${note}`
          : note;
        responseTextarea.value = newResponse;
      }

      displaySavedNotes();
      populateCannedResponses();
    
    </script>

    <script>
      function filterNotes(searchText) {
        const noteList = document.getElementById("noteList");
        noteList.innerHTML = "";

        const savedNotes = getFromLocalStorage("notes");
        savedNotes.forEach((note, index) => {
          if (
            note.title.toLowerCase().includes(searchText) ||
            note.note.toLowerCase().includes(searchText)
          ) {
            // Create and append list items for each matched note
            const noteItem = document.createElement("li");
            noteItem.className = "note-item";
            noteItem.innerHTML = `
        <div class="bg-white rounded-lg shadow-lg p-1 "

        <div >
          <span class="font-semibold">${note.title}</span>
          <p class="text-gray-600">${note.note}</p>
        
         
     
          <button onclick="deleteNote(${index})" class="bg-red-950 opacity-90  text-white text-xs  rounded-lg h-8 font-semibold px-3 py-1">Delete</button>

          <button onclick="openEditModal(${index})" class="bg-yellow-500 opacity-90  text-white text-xs  rounded-lg h-8 font-semibold px-3 py-1">Edit</button>
          

          <!--<button onclick="useAsResponse('${note.note}')" class="bg-yellow-500 opacity-90  text-white text-xs  rounded-lg h-8 font-semibold px-3 py-1">Use as Response</button>
          </div>-->
      `;
            noteList.appendChild(noteItem);
          }
        });
      }

      // Attach event listener to the search input
      const searchInput = document.getElementById("searchInput");
      searchInput.addEventListener("input", () => {
        const searchText = searchInput.value.toLowerCase();
        filterNotes(searchText);
      });

      // Initialize saved notes display on the notes.html page
      if (window.location.pathname.includes("notes.html")) {
        displaySavedNotes();
      }
    </script>
   
    

    
</body>
</html>